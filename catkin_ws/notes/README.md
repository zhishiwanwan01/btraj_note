# BTrajè½¨è¿¹è§„åˆ’ç³»ç»Ÿ - æ–‡æ¡£ç´¢å¼•

æœ¬ç›®å½•åŒ…å«äº†BTrajè½¨è¿¹è§„åˆ’ç³»ç»Ÿçš„å®Œæ•´æ–‡æ¡£é›†åˆï¼Œä¸“ä¸ºC++ã€ROSå’Œè¿åŠ¨è§„åˆ’èƒŒæ™¯è¾ƒå¼±çš„å¼€å‘è€…è®¾è®¡ã€‚

## ğŸ“š æ–‡æ¡£ç›®å½•

### ğŸš€ å¿«é€Ÿå…¥é—¨
1. **[README.md](./README.md)** - æœ¬æ–‡æ¡£ï¼Œæä¾›æ•´ä½“å¯¼è§ˆ
2. **[background_knowledge_guide.md](./background_knowledge_guide.md)** - ç»¼åˆåŸºç¡€çŸ¥è¯†æŒ‡å—

### ğŸ’» æŠ€æœ¯åŸºç¡€
3. **[cpp_ros_basics.md](./cpp_ros_basics.md)** - C++å’ŒROSåŸºç¡€çŸ¥è¯†è¯¦è§£
4. **[trajectory_planning_algorithms.md](./trajectory_planning_algorithms.md)** - è½¨è¿¹è§„åˆ’ç®—æ³•è¯¦è§£

### ğŸ” ä»£ç è§£æ
5. **[code_structure_analysis.md](./code_structure_analysis.md)** - ä»£ç ç»“æ„æ·±åº¦åˆ†æ
6. **[nodeinfo_b_traj_node.md](./nodeinfo_b_traj_node.md)** - b_traj_nodeèŠ‚ç‚¹ä¿¡æ¯
7. **[nodeinfo_b_traj_server.md](./nodeinfo_b_traj_server.md)** - b_traj_serverèŠ‚ç‚¹ä¿¡æ¯

---

## ğŸ“– å­¦ä¹ è·¯å¾„æ¨è

### åˆå­¦è€…è·¯å¾„ (é›¶åŸºç¡€ â†’ ç†è§£ä»£ç )

```
ç¬¬1æ­¥: åŸºç¡€çŸ¥è¯†å‡†å¤‡
â”œâ”€â”€ cpp_ros_basics.md (ç¬¬1-2ç« ) - C++åŸºç¡€
â”œâ”€â”€ cpp_ros_basics.md (ç¬¬3-4ç« ) - ROSåŸºç¡€
â””â”€â”€ background_knowledge_guide.md (ç¬¬1-2ç« ) - æœºå™¨äººç³»ç»Ÿæ¦‚å¿µ

ç¬¬2æ­¥: ç®—æ³•ç†è®ºå­¦ä¹ 
â”œâ”€â”€ background_knowledge_guide.md (ç¬¬3-4ç« ) - è½¨è¿¹è§„åˆ’åŸºç¡€
â””â”€â”€ trajectory_planning_algorithms.md - ç®—æ³•è¯¦è§£

ç¬¬3æ­¥: ä»£ç ç†è§£
â”œâ”€â”€ code_structure_analysis.md - æ•´ä½“æ¶æ„
â”œâ”€â”€ nodeinfo_b_traj_node.md - èŠ‚ç‚¹åŠŸèƒ½
â””â”€â”€ æºä»£ç  + æ³¨é‡Š - å…·ä½“å®ç°
```

### è¿›é˜¶å¼€å‘è€…è·¯å¾„ (æœ‰åŸºç¡€ â†’ æ·±åº¦å®šåˆ¶)

```
ç¬¬1æ­¥: å¿«é€Ÿæ¦‚è§ˆ
â””â”€â”€ background_knowledge_guide.md - ç³»ç»Ÿæ•´ä½“ç†è§£

ç¬¬2æ­¥: ç®—æ³•æ·±å…¥
â”œâ”€â”€ trajectory_planning_algorithms.md - ç®—æ³•åŸç†
â””â”€â”€ code_structure_analysis.md (ç¬¬3-6ç« ) - å®ç°ç»†èŠ‚

ç¬¬3æ­¥: æ€§èƒ½ä¼˜åŒ–
â”œâ”€â”€ cpp_ros_basics.md (ç¬¬5ç« ) - æ€§èƒ½ä¼˜åŒ–æŠ€å·§
â””â”€â”€ code_structure_analysis.md (ç¬¬6ç« ) - æ€§èƒ½å…³é”®ç‚¹
```

---

## ğŸ¯ æ ¹æ®ç›®æ ‡é€‰æ‹©æ–‡æ¡£

### ğŸ”§ æˆ‘æƒ³ä¿®æ”¹ç®—æ³•å‚æ•°
**æ¨èæ–‡æ¡£**:
- `trajectory_planning_algorithms.md` (ç¬¬6ç«  - æ—¶é—´åˆ†é…)
- `code_structure_analysis.md` (ç¬¬3ç«  - å‡½æ•°èŒè´£)

### ğŸš æˆ‘æƒ³é€‚é…æ–°çš„æ— äººæœºå¹³å°
**æ¨èæ–‡æ¡£**:
- `cpp_ros_basics.md` (ç¬¬2ç«  - ROSé€šä¿¡)
- `background_knowledge_guide.md` (ç¬¬2ç«  - ROSåŸºç¡€)

### ğŸ§­ æˆ‘æƒ³æ”¹è¿›è·¯å¾„æœç´¢ç®—æ³•
**æ¨èæ–‡æ¡£**:
- `trajectory_planning_algorithms.md` (ç¬¬2-3ç«  - Fast Marchingå’ŒA*)
- `code_structure_analysis.md` (ç¬¬4ç«  - æ•°æ®æµåˆ†æ)

### ğŸ® æˆ‘æƒ³æ·»åŠ æ–°çš„å¯è§†åŒ–åŠŸèƒ½
**æ¨èæ–‡æ¡£**:
- `cpp_ros_basics.md` (ç¬¬2.3.3ç«  - å¯è§†åŒ–æ¶ˆæ¯)
- `code_structure_analysis.md` (ç¬¬3.4.2ç«  - å¯è§†åŒ–å‡½æ•°)

### ğŸ”’ æˆ‘æƒ³æé«˜è½¨è¿¹å®‰å…¨æ€§
**æ¨èæ–‡æ¡£**:
- `trajectory_planning_algorithms.md` (ç¬¬4ç«  - å®‰å…¨èµ°å»Š)
- `code_structure_analysis.md` (ç¬¬3.3ç«  - å®‰å…¨ç›‘æ§)

### âš¡æˆ‘æƒ³ä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½
**æ¨èæ–‡æ¡£**:
- `cpp_ros_basics.md` (ç¬¬5ç«  - å†…å­˜ç®¡ç†å’Œæ€§èƒ½ä¼˜åŒ–)
- `code_structure_analysis.md` (ç¬¬6ç«  - æ€§èƒ½å…³é”®ç‚¹)

---

## ğŸ“‹ æ ¸å¿ƒæ¦‚å¿µé€ŸæŸ¥

### å…³é”®æ•°æ®ç»“æ„
```cpp
Vector3d _start_pt, _end_pt;        // èµ·ç‚¹å’Œç»ˆç‚¹
MatrixXd _bezier_coeff;             // Bezierè½¨è¿¹ç³»æ•°
vector<Cube> corridor;              // å®‰å…¨èµ°å»Š
CollisionMapGrid* collision_map;    // ç¢°æ’æ£€æµ‹åœ°å›¾
```

### ä¸»è¦å‡½æ•°
```cpp
trajPlanning()                      // ä¸»è§„åˆ’å‡½æ•°
checkExecTraj()                     // å®‰å…¨æ£€æŸ¥å‡½æ•°
rcvPointCloudCallBack()            // åœ°å›¾æ›´æ–°å›è°ƒ
rcvWaypointsCallback()             // ç›®æ ‡æ¥æ”¶å›è°ƒ
```

### é‡è¦å‚æ•°
```cpp
_is_use_fm                         // ç®—æ³•é€‰æ‹© (FM*/A*)
_MAX_Vel, _MAX_Acc                 // åŠ¨åŠ›å­¦çº¦æŸ
_resolution                        // åœ°å›¾åˆ†è¾¨ç‡
_check_horizon, _stop_horizon      // å®‰å…¨æ£€æŸ¥å‚æ•°
```

---

## ğŸ› ï¸ å¸¸è§é—®é¢˜è§£ç­”

### Q1: å¦‚ä½•åˆ‡æ¢è·¯å¾„æœç´¢ç®—æ³•ï¼Ÿ
**A**: ä¿®æ”¹launchæ–‡ä»¶ä¸­çš„`is_use_fm`å‚æ•°
- `true`: ä½¿ç”¨Fast Marching Method
- `false`: ä½¿ç”¨A*ç®—æ³•

### Q2: å¦‚ä½•è°ƒæ•´è½¨è¿¹å¹³æ»‘ç¨‹åº¦ï¼Ÿ
**A**: ä¿®æ”¹ä»¥ä¸‹å‚æ•°ï¼š
- `traj_order`: Bezieræ›²çº¿é˜¶æ•° (8-12)
- `minimize_order`: ä¼˜åŒ–ç›®æ ‡é˜¶æ•° (3-4)

### Q3: å¦‚ä½•æé«˜è§„åˆ’é¢‘ç‡ï¼Ÿ
**A**: å‚è€ƒ`code_structure_analysis.md`ç¬¬6.3èŠ‚ï¼š
- å‡å°åœ°å›¾åˆ†è¾¨ç‡
- é™åˆ¶æœç´¢åŒºåŸŸå¤§å°
- é€‰æ‹©A*è€ŒéFast Marching

### Q4: å¦‚ä½•å¢åŠ å®‰å…¨è£•åº¦ï¼Ÿ
**A**: è°ƒæ•´ä»¥ä¸‹å‚æ•°ï¼š
- `cloud_margin`: ç‚¹äº‘è†¨èƒ€è¾¹ç•Œ
- `cube_margin`: è½¨è¿¹å®‰å…¨è¾¹ç•Œ
- `check_horizon`: ç¢°æ’æ£€æµ‹å‰ç»æ—¶é—´

---

## ğŸ’¡ å­¦ä¹ å»ºè®®

### å¯¹äºåˆå­¦è€…
1. **ä¸è¦æ€¥äºçœ‹ä»£ç **ï¼šå…ˆç†è§£åŸºç¡€æ¦‚å¿µå’Œç®—æ³•åŸç†
2. **å¾ªåºæ¸è¿›**ï¼šæŒ‰æ¨èçš„å­¦ä¹ è·¯å¾„é€æ­¥æ·±å…¥
3. **åŠ¨æ‰‹å®è·µ**ï¼šåœ¨ä»¿çœŸç¯å¢ƒä¸­æµ‹è¯•ä¸åŒå‚æ•°çš„æ•ˆæœ
4. **è®°å½•ç¬”è®°**ï¼šå°†ç†è®ºçŸ¥è¯†ä¸ä»£ç å®ç°å¯¹åº”èµ·æ¥

### å¯¹äºæœ‰ç»éªŒçš„å¼€å‘è€…
1. **é‡ç‚¹å…³æ³¨ç®—æ³•åˆ›æ–°ç‚¹**ï¼šFast Marchingåœ¨è½¨è¿¹è§„åˆ’ä¸­çš„åº”ç”¨
2. **åˆ†æè®¾è®¡æ¨¡å¼**ï¼šå›è°ƒé©±åŠ¨ã€åˆ†å±‚å¤„ç†ã€çŠ¶æ€ç®¡ç†
3. **æ€§èƒ½ä¼˜åŒ–æœºä¼š**ï¼šåŒåœ°å›¾ç­–ç•¥ã€å¼‚æ­¥å¤„ç†ã€ç¼“å­˜æœºåˆ¶
4. **æ‰©å±•å¯èƒ½æ€§**ï¼šå¤šæœºååŒã€åŠ¨æ€éšœç¢ç‰©ã€å®æ—¶é‡è§„åˆ’

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœåœ¨å­¦ä¹ è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

1. **é¦–å…ˆæŸ¥é˜…ç›¸å…³æ–‡æ¡£ç« èŠ‚**
2. **æ£€æŸ¥ä»£ç ä¸­çš„è¯¦ç»†æ³¨é‡Š**
3. **å‚è€ƒlaunchæ–‡ä»¶ä¸­çš„å‚æ•°è¯´æ˜**
4. **æŸ¥çœ‹ROSå®˜æ–¹æ–‡æ¡£**ï¼šhttp://wiki.ros.org
5. **å‚è€ƒPCLå®˜æ–¹æ–‡æ¡£**ï¼šhttps://pointclouds.org
6. **å‚è€ƒEigenå®˜æ–¹æ–‡æ¡£**ï¼šhttps://eigen.tuxfamily.org

---

## ğŸ”„ æ–‡æ¡£æ›´æ–°è®°å½•

- **2024-09**: åˆ›å»ºå®Œæ•´æ–‡æ¡£é›†åˆ
- **å†…å®¹è¦†ç›–**: C++åŸºç¡€ã€ROSç³»ç»Ÿã€ç®—æ³•åŸç†ã€ä»£ç ç»“æ„
- **ç›®æ ‡å—ä¼—**: C++/ROS/è¿åŠ¨è§„åˆ’åˆå­¦è€…åˆ°è¿›é˜¶å¼€å‘è€…

---

**å¼€å§‹æ‚¨çš„BTrajå­¦ä¹ ä¹‹æ—…å§ï¼** ğŸš€

æ ¹æ®æ‚¨çš„èƒŒæ™¯é€‰æ‹©åˆé€‚çš„èµ·ç‚¹ï¼ŒæŒ‰ç…§æ¨èè·¯å¾„é€æ­¥æ·±å…¥ã€‚è¿™å¥—æ–‡æ¡£å°†å¸®åŠ©æ‚¨ä»é›¶åŸºç¡€æˆé•¿ä¸ºBTrajè½¨è¿¹è§„åˆ’ç³»ç»Ÿçš„ä¸“å®¶ã€‚